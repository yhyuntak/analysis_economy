# Epic 4: Agent A ì§„í™” - ì´ë²¤íŠ¸ ê°ì§€ ë° ë‹¤ì¤‘ ì‹œë‚˜ë¦¬ì˜¤

## Epic ê°œìš”

**ID**: EPIC-004
**ì œëª©**: Agent A ì§„í™” - ì´ë²¤íŠ¸ ê¸°ë°˜ íŠ¸ë¦¬ê±° ë° ë‹¤ì¤‘ ì‹œë‚˜ë¦¬ì˜¤ ìš´ì˜
**Priority**: Should Have
**Story Points**: 21
**Target Release**: Release 2 (Month 4-6)
**Status**: ëŒ€ê¸° ì¤‘
**ì˜ì¡´ì„±**: Epic 3 ì™„ë£Œ í•„ìš”

---

## PM ê´€ì 

### ë¹„ì¦ˆë‹ˆìŠ¤ ëª©í‘œ

1. **ë°˜ì‘ ì†ë„ í–¥ìƒ**: ì •ê¸° ì‹¤í–‰ â†’ ì´ë²¤íŠ¸ ë°œìƒ ì‹œ ì¦‰ì‹œ ë¶„ì„ (1ì£¼ â†’ 1ì‹œê°„)
2. **ì„¹í„° ì»¤ë²„ë¦¬ì§€ í™•ëŒ€**: 5-7ê°œ ì‹œë‚˜ë¦¬ì˜¤ ë™ì‹œ ìš´ì˜ìœ¼ë¡œ ì „ ì‹œì¥ ëŒ€ì‘
3. **ê²½ìŸ ìš°ìœ„ í™•ë³´**: ì£¼ìš” ê²½ì œ ì´ë²¤íŠ¸ ë°œìƒ ì‹œ ìë™ ë¶„ì„ìœ¼ë¡œ ì‹œì¥ ëŒ€ì‘ ì‹œê°„ ë‹¨ì¶•

### ì‚¬ìš©ì ê°€ì¹˜

**Target User**: ì ê·¹ì  íˆ¬ìì

**Pain Point**:
- ê¸ˆë¦¬ ë°œí‘œ, FOMC ë“± ì¤‘ìš” ì´ë²¤íŠ¸ ë°œìƒ ì‹œ ìˆ˜ë™ìœ¼ë¡œ ë¶„ì„ ì‹¤í–‰
- ë‰´ìŠ¤ í™•ì¸í•˜ê³  â†’ ê´€ë ¨ ì‹œë‚˜ë¦¬ì˜¤ ì°¾ê³  â†’ ì‹¤í–‰í•˜ëŠ” ë²ˆê±°ë¡œì›€
- ì´ë²¤íŠ¸ ë†“ì¹˜ë©´ ì‹œì¥ ëŒ€ì‘ ëŠ¦ìŒ

**Provided Value**:
- FED ê¸ˆë¦¬ ì¸í•˜ ë°œí‘œ â†’ 30ë¶„ ë‚´ ê¸ˆìœµ/ë¶€ë™ì‚° ì„¹í„° ì˜í–¥ ë¶„ì„ ì™„ë£Œ
- PMI ë°œí‘œ â†’ ìë™ìœ¼ë¡œ ì‚°ì—…ì¬ ë¶„ì„ íŠ¸ë¦¬ê±°
- ì‚¬ìš©ìëŠ” ìŠ¬ë™ ì•Œë¦¼ë§Œ í™•ì¸í•˜ë©´ ë¨

### Success Metrics

- [ ] **ì´ë²¤íŠ¸ ê°ì§€ ì •í™•ë„**: 90% ì´ìƒ (í…ŒìŠ¤íŠ¸ ì´ë²¤íŠ¸ 10ê°œ ì¤‘ 9ê°œ ê°ì§€)
- [ ] **ëŒ€ì‘ ì‹œê°„**: ì´ë²¤íŠ¸ ë°œìƒ â†’ ë¶„ì„ ì™„ë£Œ 30ë¶„ ì´ë‚´
- [ ] **ì˜¤íƒë¥ **: 15% ì´í•˜ (ë¶ˆí•„ìš”í•œ ì•Œë¦¼ ìµœì†Œí™”)
- [ ] **ì‹œë‚˜ë¦¬ì˜¤ ì‹¤í–‰ ì„±ê³µë¥ **: 95% ì´ìƒ

---

## Designer ê´€ì 

### UX ëª©í‘œ

1. **ì´ë²¤íŠ¸ ë§¥ë½ ì œê³µ**: ì™œ ì´ ë¶„ì„ì´ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ ëª…í™•íˆ
2. **ê¸´ê¸‰ë„ í‘œì‹œ**: High/Medium/Lowë¡œ ìš°ì„ ìˆœìœ„ ì „ë‹¬
3. **ë‹¤ì¤‘ ë¦¬í¬íŠ¸ ê´€ë¦¬**: ë‚ ì§œ/ì‹œë‚˜ë¦¬ì˜¤ë³„ ì²´ê³„ì  ì •ë¦¬

### ì´ë²¤íŠ¸ ì•Œë¦¼ í¬ë§·

```
ğŸš¨ ê¸´ê¸‰ ì´ë²¤íŠ¸ ê°ì§€ (HIGH)

ğŸ“° ì´ë²¤íŠ¸: FED ê¸°ì¤€ê¸ˆë¦¬ 0.5% ì¸í•˜ ë°œí‘œ
ğŸ• ê°ì§€ ì‹œê°: 2025-11-18 03:15 (ë™ë¶€ ì‹œê°„ 02:15)
ğŸ”— ì¶œì²˜: Federal Reserve ê³µì‹ ë°œí‘œ

ğŸ¤– ìë™ ë¶„ì„ ì‹œì‘:
  âœ“ ê¸ˆë¦¬ ì¸í•˜ ëŒ€ì‘ ì‹œë‚˜ë¦¬ì˜¤ (ì‹œë‚˜ë¦¬ì˜¤ #2)
  âœ“ ê¸ˆìœµ ì„¹í„° ì˜í–¥ ë¶„ì„
  âœ“ ë¶€ë™ì‚° ì„¹í„° ì˜í–¥ ë¶„ì„

â³ ì˜ˆìƒ ì™„ë£Œ: 30ë¶„ ì´ë‚´
```

```
âœ… ì´ë²¤íŠ¸ ë¶„ì„ ì™„ë£Œ

ğŸ“° ì´ë²¤íŠ¸: FED ê¸°ì¤€ê¸ˆë¦¬ 0.5% ì¸í•˜
â° ë¶„ì„ ì™„ë£Œ: 2025-11-18 03:42 (ì†Œìš” 27ë¶„)

ğŸ“Š í•µì‹¬ ì¸ì‚¬ì´íŠ¸:
1. ê¸ˆìœµ ì„¹í„°: ì€í–‰ì£¼ ë‹¨ê¸° ì•…ì¬, ìì‚°ìš´ìš©ì‚¬ ìˆ˜í˜œ ì˜ˆìƒ
2. ë¶€ë™ì‚°: REITs ê¸‰ë“± ê°€ëŠ¥ì„±, ì£¼íƒ ê±´ì„¤ì£¼ ê¸ì •
3. íˆ¬ì ì „ëµ: ë°©ì–´ì  ë°°ë‹¹ì£¼ â†’ ì„±ì¥ì£¼ ë¡œí…Œì´ì…˜ ê³ ë ¤

ğŸ“„ ìƒì„¸ ë¦¬í¬íŠ¸: [ë§í¬1] [ë§í¬2]
```

### ë¦¬í¬íŠ¸ ê´€ë¦¬ êµ¬ì¡°

```
reports/
â”œâ”€â”€ 2025-11-18/
â”‚   â”œâ”€â”€ event_fed_rate_cut/
â”‚   â”‚   â”œâ”€â”€ interest_rate_impact_20251118_0342.md
â”‚   â”‚   â”œâ”€â”€ financials_analysis_20251118_0342.md
â”‚   â”‚   â””â”€â”€ real_estate_analysis_20251118_0342.md
â”‚   â””â”€â”€ scheduled_semiconductor_weekly_20251118_0900.md
â””â”€â”€ 2025-11-11/
    â””â”€â”€ ...
```

---

## Developer ê´€ì 

### ê¸°ìˆ  ëª©í‘œ

1. **RSS/ë‰´ìŠ¤ ëª¨ë‹ˆí„°ë§**: ì‹¤ì‹œê°„ ê²½ì œ ë‰´ìŠ¤ í”¼ë“œ ê°ì‹œ
2. **í‚¤ì›Œë“œ ê¸°ë°˜ ì´ë²¤íŠ¸ ê°ì§€**: NLP ë˜ëŠ” ê·œì¹™ ê¸°ë°˜ ì´ë²¤íŠ¸ ë¶„ë¥˜
3. **ì´ë²¤íŠ¸-ì‹œë‚˜ë¦¬ì˜¤ ë§¤í•‘**: ì´ë²¤íŠ¸ íƒ€ì…ë³„ ì í•©í•œ ì‹œë‚˜ë¦¬ì˜¤ ìë™ ì„ íƒ
4. **ë‹¤ì¤‘ ì‹¤í–‰ ê´€ë¦¬**: ì—¬ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤ ìˆœì°¨ ë˜ëŠ” ë³‘ë ¬ ì‹¤í–‰

### Architecture Overview

```
agents/
â””â”€â”€ monitor/
    â”œâ”€â”€ event_detector.py       # ì´ë²¤íŠ¸ ê°ì§€ ì—”ì§„
    â”œâ”€â”€ feed_watcher.py         # RSS/ë‰´ìŠ¤ í”¼ë“œ ëª¨ë‹ˆí„°ë§
    â”œâ”€â”€ event_classifier.py     # ì´ë²¤íŠ¸ ë¶„ë¥˜ ë° ìš°ì„ ìˆœìœ„
    â”œâ”€â”€ scenario_mapper.py      # ì´ë²¤íŠ¸-ì‹œë‚˜ë¦¬ì˜¤ ë§¤í•‘
    â””â”€â”€ executor.py             # ë‹¤ì¤‘ ì‹œë‚˜ë¦¬ì˜¤ ì‹¤í–‰

config/
â”œâ”€â”€ event_rules.yaml            # ì´ë²¤íŠ¸ ê°ì§€ ê·œì¹™
â””â”€â”€ scenario_mapping.yaml       # ì´ë²¤íŠ¸-ì‹œë‚˜ë¦¬ì˜¤ ë§¤í•‘
```

### ì´ë²¤íŠ¸ ê°ì§€ ê·œì¹™ ì˜ˆì‹œ

```yaml
# config/event_rules.yaml
event_rules:
  - name: fed_rate_change
    keywords:
      - "Federal Reserve"
      - "ê¸°ì¤€ê¸ˆë¦¬"
      - "FOMC"
      - "interest rate"
    priority: HIGH
    sources:
      - https://www.federalreserve.gov/feeds/
      - https://www.reuters.com/finance/rss
    scenarios:
      - interest-rate-impact
      - financials-analysis
      - real-estate-analysis

  - name: pmi_release
    keywords:
      - "PMI"
      - "ì œì¡°ì—… ì§€ìˆ˜"
      - "Manufacturing Index"
    priority: MEDIUM
    sources:
      - https://www.markiteconomics.com/rss
    scenarios:
      - pmi-analysis
      - industrials-analysis

  - name: oil_price_surge
    keywords:
      - "ìœ ê°€"
      - "oil price"
      - "crude oil"
    threshold: "+5%"           # ì¼ì¼ ë³€ë™ 5% ì´ìƒ
    priority: MEDIUM
    scenarios:
      - energy-analysis
      - materials-analysis
```

### ì´ë²¤íŠ¸ ê°ì§€ ë¡œì§

```python
# agents/monitor/event_detector.py
import feedparser
import re
from typing import List, Dict, Any
from datetime import datetime

class EventDetector:
    def __init__(self, rules: Dict[str, Any]):
        self.rules = rules
        self.detected_events = []

    def watch_feeds(self):
        """
        RSS í”¼ë“œ ëª¨ë‹ˆí„°ë§ (ë¬´í•œ ë£¨í”„)
        """
        for rule in self.rules:
            for source in rule['sources']:
                feed = feedparser.parse(source)

                for entry in feed.entries:
                    if self._is_event_match(entry, rule):
                        event = self._create_event(entry, rule)
                        self.detected_events.append(event)
                        self._trigger_scenarios(event)

    def _is_event_match(self, entry, rule) -> bool:
        """
        í‚¤ì›Œë“œ ê¸°ë°˜ ì´ë²¤íŠ¸ ë§¤ì¹­
        """
        text = entry.title + " " + entry.summary
        for keyword in rule['keywords']:
            if keyword.lower() in text.lower():
                return True
        return False

    def _create_event(self, entry, rule) -> Dict[str, Any]:
        """
        ì´ë²¤íŠ¸ ê°ì²´ ìƒì„±
        """
        return {
            'event_id': self._generate_event_id(),
            'name': rule['name'],
            'title': entry.title,
            'source': entry.link,
            'detected_at': datetime.now(),
            'priority': rule['priority'],
            'scenarios': rule['scenarios']
        }

    def _trigger_scenarios(self, event: Dict[str, Any]):
        """
        ì´ë²¤íŠ¸ì— ë§¤í•‘ëœ ì‹œë‚˜ë¦¬ì˜¤ ì‹¤í–‰
        """
        from agents.monitor.executor import ScenarioExecutor

        executor = ScenarioExecutor()
        for scenario_name in event['scenarios']:
            executor.run_scenario(
                scenario=scenario_name,
                context={'event': event}
            )
```

### ë‹¤ì¤‘ ì‹œë‚˜ë¦¬ì˜¤ ì‹¤í–‰ ì „ëµ

```python
# agents/monitor/executor.py
from concurrent.futures import ThreadPoolExecutor
import time

class ScenarioExecutor:
    def __init__(self, max_parallel: int = 3):
        self.max_parallel = max_parallel

    def run_multiple_scenarios(self, scenarios: List[str], context: Dict):
        """
        ì—¬ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤ ë³‘ë ¬ ë˜ëŠ” ìˆœì°¨ ì‹¤í–‰
        """
        if len(scenarios) <= 2:
            # ì†Œìˆ˜ë©´ ìˆœì°¨ ì‹¤í–‰ (ë¦¬ì†ŒìŠ¤ ì ˆì•½)
            for scenario in scenarios:
                self.run_scenario(scenario, context)
        else:
            # ë‹¤ìˆ˜ë©´ ë³‘ë ¬ ì‹¤í–‰ (ì†ë„ ìš°ì„ )
            with ThreadPoolExecutor(max_workers=self.max_parallel) as executor:
                futures = [
                    executor.submit(self.run_scenario, s, context)
                    for s in scenarios
                ]
                results = [f.result() for f in futures]
```

### Implementation Complexity

**ì´ Story Points**: 21

- **Story 1**: RSS/ë‰´ìŠ¤ í”¼ë“œ ëª¨ë‹ˆí„°ë§ (5pt) - ì¤‘ê°„ ë‚œì´ë„
- **Story 2**: í‚¤ì›Œë“œ ê¸°ë°˜ ì´ë²¤íŠ¸ ê°ì§€ ë¡œì§ (5pt) - ì¤‘ê°„ ë‚œì´ë„
- **Story 3**: ì´ë²¤íŠ¸-ì‹œë‚˜ë¦¬ì˜¤ ë§¤í•‘ ë° ìë™ íŠ¸ë¦¬ê±° (5pt) - ì¤‘ê°„ ë‚œì´ë„
- **Story 4**: ì‹œë‚˜ë¦¬ì˜¤ #2 ê¸ˆë¦¬ ì¸í•˜ ëŒ€ì‘ ì¶”ê°€ (6pt) - ì¤‘ê°„ ë‚œì´ë„

### ì£¼ìš” ê¸°ìˆ  ê³¼ì œ

1. **RSS í”¼ë“œ ëª¨ë‹ˆí„°ë§ íš¨ìœ¨ì„±**
   - **í•´ê²°**: í´ë§ ê°„ê²© 5-10ë¶„, ì¤‘ë³µ ì´ë²¤íŠ¸ í•„í„°ë§

2. **ì˜¤íƒ (False Positive) ë°©ì§€**
   - **í•´ê²°**: í‚¤ì›Œë“œ ì¡°í•©, ì‹ ë¢°ë„ ì„ê³„ê°’, í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ì†ŒìŠ¤

3. **ë‹¤ì¤‘ ì‹¤í–‰ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬**
   - **í•´ê²°**: LLM API í˜¸ì¶œ ì œí•œ, ë³‘ë ¬ ì‹¤í–‰ 3ê°œë¡œ ì œí•œ

4. **ì´ë²¤íŠ¸ ì¤‘ë³µ ê°ì§€**
   - **í•´ê²°**: ì´ë²¤íŠ¸ í•´ì‹œ, 24ì‹œê°„ ë‚´ ë™ì¼ ì´ë²¤íŠ¸ ë¬´ì‹œ

### Dependencies

```txt
# ì¶”ê°€ ì˜ì¡´ì„±
feedparser==6.0.10          # RSS íŒŒì‹±
newspaper3k==0.2.8          # ë‰´ìŠ¤ ì¶”ì¶œ (ì„ íƒ)
```

---

## User Stories

ì´ Epicì€ 4ê°œì˜ User Storyë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:

1. **[Story 1] RSS/ë‰´ìŠ¤ í”¼ë“œ ëª¨ë‹ˆí„°ë§** (5pt)
   - RSS í”¼ë“œ íŒŒì„œ êµ¬í˜„
   - í´ë§ ìŠ¤ì¼€ì¤„ëŸ¬
   - í”¼ë“œ ì†ŒìŠ¤ ì„¤ì • (FED, Reuters, Bloomberg)

2. **[Story 2] í‚¤ì›Œë“œ ê¸°ë°˜ ì´ë²¤íŠ¸ ê°ì§€ ë¡œì§** (5pt)
   - ì´ë²¤íŠ¸ ê·œì¹™ ì •ì˜ (YAML)
   - í‚¤ì›Œë“œ ë§¤ì¹­ ì—”ì§„
   - ì´ë²¤íŠ¸ ë¶„ë¥˜ ë° ìš°ì„ ìˆœìœ„

3. **[Story 3] ì´ë²¤íŠ¸-ì‹œë‚˜ë¦¬ì˜¤ ë§¤í•‘ ë° ìë™ íŠ¸ë¦¬ê±°** (5pt)
   - ì‹œë‚˜ë¦¬ì˜¤ ë§¤í•‘ ì„¤ì •
   - ìë™ ì‹¤í–‰ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
   - ë‹¤ì¤‘ ì‹¤í–‰ ê´€ë¦¬ (ìˆœì°¨/ë³‘ë ¬)

4. **[Story 4] ì‹œë‚˜ë¦¬ì˜¤ #2 ê¸ˆë¦¬ ì¸í•˜ ëŒ€ì‘ ì¶”ê°€** (6pt)
   - ê¸ˆë¦¬ ë°ì´í„° ìˆ˜ì§‘
   - ê¸ˆìœµ/ë¶€ë™ì‚° ì„¹í„° ETF ë¶„ì„
   - LLM í”„ë¡¬í”„íŠ¸ ìµœì í™”

---

## Acceptance Criteria

Epic ì „ì²´ê°€ ì™„ë£Œë˜ì—ˆë‹¤ê³  íŒë‹¨í•˜ëŠ” ê¸°ì¤€:

- [ ] RSS í”¼ë“œ ëª¨ë‹ˆí„°ë§ 24ì‹œê°„ ì´ìƒ ì•ˆì • ë™ì‘
- [ ] í…ŒìŠ¤íŠ¸ ì´ë²¤íŠ¸ 10ê°œ ì¤‘ 9ê°œ ì´ìƒ ì •í™•íˆ ê°ì§€
- [ ] ê¸ˆë¦¬ ë°œí‘œ ì´ë²¤íŠ¸ â†’ 30ë¶„ ë‚´ 3ê°œ ì‹œë‚˜ë¦¬ì˜¤ ë¶„ì„ ì™„ë£Œ
- [ ] ì˜¤íƒë¥  15% ì´í•˜ (ë¶ˆí•„ìš”í•œ ì•Œë¦¼ ìµœì†Œí™”)
- [ ] ì´ë²¤íŠ¸ ì•Œë¦¼ì— ë§¥ë½ ì •ë³´ í¬í•¨ (ì´ë²¤íŠ¸ ì œëª©, ì¶œì²˜, ìš°ì„ ìˆœìœ„)
- [ ] ë‹¤ì¤‘ ë¦¬í¬íŠ¸ ë‚ ì§œ/ì´ë²¤íŠ¸ë³„ í´ë”ì— ì²´ê³„ì  ì €ì¥

---

## Risks & Mitigation

| ë¦¬ìŠ¤í¬ | ì˜í–¥ | í™•ë¥  | ì™„í™” ì „ëµ |
|--------|------|------|-----------|
| ì˜¤íƒ ê³¼ë‹¤ (ì•Œë¦¼ í”¼ë¡œ) | ë†’ìŒ | ë†’ìŒ | í‚¤ì›Œë“œ ì •êµí™”, ì‹ ë¢°ë„ ì„ê³„ê°’, ì‚¬ìš©ì í”¼ë“œë°± |
| RSS í”¼ë“œ ë³€ê²½/ì¤‘ë‹¨ | ì¤‘ê°„ | ì¤‘ê°„ | ë‹¤ì¤‘ ì†ŒìŠ¤ ë°±ì—…, fallback ë¡œì§ |
| LLM API ë¹„ìš© ê¸‰ì¦ | ë†’ìŒ | ì¤‘ê°„ | ì´ë²¤íŠ¸ë‹¹ ì‹¤í–‰ ì‹œë‚˜ë¦¬ì˜¤ ì œí•œ (ìµœëŒ€ 3ê°œ) |
| ì´ë²¤íŠ¸ ëˆ„ë½ (ë¯¸ê°ì§€) | ì¤‘ê°„ | ì¤‘ê°„ | ì •ê¸° ì‹¤í–‰ ë³‘í–‰, ì¤‘ìš” ì†ŒìŠ¤ ì¶”ê°€ |

---

## Timeline Estimate

**ì´ ì˜ˆìƒ ê¸°ê°„**: 2-3ì£¼ (1ì¸ ê°œë°œ)

- **Week 1**: Story 1-2 (í”¼ë“œ ëª¨ë‹ˆí„°ë§ + ì´ë²¤íŠ¸ ê°ì§€)
- **Week 2**: Story 3 (ë§¤í•‘ + ìë™ íŠ¸ë¦¬ê±°)
- **Week 3**: Story 4 (ê¸ˆë¦¬ ì‹œë‚˜ë¦¬ì˜¤) + í†µí•© í…ŒìŠ¤íŠ¸

---

## ë‹¤ìŒ ë‹¨ê³„

1. Epic 3 ì™„ë£Œ ë° 4ì£¼ ì•ˆì •ì„± ê²€ì¦ í›„ ì§„í–‰
2. Story 1ë¶€í„° ìˆœì°¨ ì§„í–‰
3. Story 2 ì™„ë£Œ í›„ 1ì£¼ì¼ ì˜¤íƒë¥  ëª¨ë‹ˆí„°ë§
4. Story 3 ì™„ë£Œ í›„ ì´ë²¤íŠ¸ ì‹œë®¬ë ˆì´ì…˜ í…ŒìŠ¤íŠ¸
5. Epic 5 (UI) ë˜ëŠ” ì¶”ê°€ ì‹œë‚˜ë¦¬ì˜¤ ê³ ë ¤

---

**Epic Owner**: Developer (ë³¸ì¸)
**Created**: 2025-11-18
**Last Updated**: 2025-11-18
